import{e as r,f as S,h as O,j as p,k as b}from"./lib/C5AFILMD.js";import{app as B,session as D,nativeTheme as Xe}from"electron";import{createWriteStream as K,mkdirSync as q}from"fs";import{exit as G,stdout as _}from"process";import{dirname as J}from"path";var v={hide:"\x1B[?25l",show:"\x1B[?25h",end:"\x1B[K",start:"\r"},X={moon:"\uE3E3\uE3C8\uE3C9\uE3CA\uE3CB\uE3CC\uE3CD\uE3CE\uE3CF\uE3D0\uE3D1\uE3D2\uE3D3\uE3D4\uE3D5\uE3D6\uE3D7\uE3D8\uE3D9\uE3DA\uE3DB\uE3DC\uE3DD\uE3DE\uE3DF\uE3E0\uE3E1\uE3E2\uE3E3",dots:"\u2847\u280F\u281B\u2839\u28B8\u28F0\u28E4\u28C6",line:"|/\u2500\\"},Y={line:["","\u2501","\u2501","\u2501",""],dash:["","\u2501","\u254D","\u2505",""],block:"\u2502\u2588\u2592\u2591\u2502",equal:"[==-]"},Q=["uncaughtException","SIGTERM","SIGINT","exit"],ee=0,te={...Y},ne={...X},k=(e,t=Object.keys(e)[0])=>e[t]??"",y=(e,t)=>`\x1B[38;5;${e}m${t}\x1B[0m`,T=_.write.bind(_);T(v.hide);Q.forEach(e=>process.on(e,t=>{T(v.show),G(void(t instanceof Error?r(t):0))}));async function E(e,t="download",n={silent:!1,type:"bar",style:"block"}){let s=await fetch(e);if(!s.ok||!s.body)throw new Error(`Failed to download: ${s.status} ${s.statusText}`);let{writer:o,buffer:m,end:c}=re(t),a=n.type==="spinner",f=s.body.getReader(),l=Date.now(),i={get took(){return $((Date.now()-i.startTime)/1e3)},totalBytes:+(s.headers.get("content-length")||0),delay:a?50:100,silent:n.silent,style:n.style,lastLoggedTime:l,downloadedBytes:0,startTime:l,lastBytes:0,ok:!1,spinner:a,url:e,out:t};try{for(;;){let{done:u,value:d}=await f.read();if(u){i.ok=!0;break}i.downloadedBytes+=d.length,o(d);let g=Date.now();g-i.lastLoggedTime>i.delay&&(C(i,g),i.lastBytes=i.downloadedBytes,i.lastLoggedTime=g)}}catch{}await c();let h=Date.now();return C(i,h),r(`

`+(i.ok?`\u2705 Download complete! to: ${i.out??"[Buffer]"}`:"\u274C Download failed!")+` (Took: ${i.took})`),i.buffer=m(),i}function C(e,t){if(e.silent)return;let{downloadedBytes:n,totalBytes:s,lastBytes:o,spinner:m,style:c}=e,a=30,f=s?n/s:0,l=Math.round(a*f),i=a-l,h=m||!s?se(c):ie(l,i,c),d=(n-o)/(1024**2*((t-e.lastLoggedTime)/1e3)),g=s-n,x=d>0?g/1024**2/d:0,Z=W(n),z=s?W(s):"Unknown",H=x?$(x):"...";T(v.start+`${h} ${(f*100).toFixed(1)}% (${Z}/${z}) Speed: ${d.toFixed(2)} MB/s ETA: ${H}`+v.end)}function W(e){let t=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(e)/Math.log(1024));return(e/Math.pow(1024,n)).toFixed(1)+" "+t[n]}function $(e){e=Math.round(e);let t=Math.floor(e/60),n=e%60;return`${t}m ${n}s`}function se(e){let t=k(ne,e);return y(25,t[ee++%t.length])}function ie(e,t,n){let s=k(te,n);return y(24,s[0])+y(34,s[1]).repeat(e)+y(28,s[2]).repeat(t&&1)+y(52,s[3]).repeat((t||1)-1)+y(24,s[4])}function re(e){if(e){q(J(e),{recursive:!0});let n=K(e).on("error",s=>{r(`
\u274C File write error:`,s.message),n.close()});return{buffer:()=>null,writer:s=>n.write(s),end:()=>new Promise(s=>n.end(s))}}let t=[];return{buffer:()=>Buffer.concat(t),writer:n=>t.push(n),end:()=>Promise.resolve()}}import{mkdir as oe,readdir as ot,readFile as ae,stat as at,writeFile as le}from"fs/promises";import{basename as ce,dirname as fe,extname as pe,relative as ct,join as me}from"path";import{promisify as ue}from"util";import{inflate as de,deflate as we}from"zlib";Object.assign(globalThis,{__dirname:import.meta.dirname,__filename:import.meta.filename});var V=1,A=["\0","\x1B","","",`\xBENZv${V}`];var he=Object.fromEntries([0,[we,de]].flatMap((e,t)=>[0,1].map(n=>[""+n+t,e?ue(e[n]):s=>s])));var[gt,bt,,,ge]=A,[be,P,R,I,ye]=A.map(Buffer.from),yt=Buffer.alloc(0),Be=new RegExp(`^NZ(\\d{1})[\\s\\S]*?${ge.slice(0,-1)}(\\d{1})$`);async function F(e,t){let n=[],s=typeof e=="string",o=s?await ae(e):e,m=o.subarray(0,20),c=o.subarray(-20),a=Be.exec(""+m+c);if(!a)throw new Error(`Invalid NZ Archive. Header mismatch in: ${s?e:"[Buffer]"}`);let[f,,l]=[a.pop(),...a].map(Number),i=he["1"+l],h=o.subarray(3+be.byteLength,-ye.byteLength),u=await i(h),d=Se(u,f);return n.push(...d),t===null?Object.fromEntries(n):(await Promise.all(n.map(([g,x])=>xe(me(t||(s?ce(e,pe(e)):"archive"),g),x))),void 0)}var xe=async(e,t)=>{await oe(fe(e),{recursive:!0}),await le(e,t)};function Se(e,t=V,n=0){let[s,o,m]=[P,R,I].map(a=>a.byteLength),c=[];for(;;){let a=e.indexOf(P,n);if(a===-1)break;let f=e.indexOf(R,n),l=e.indexOf(I,n),i=e.subarray(a+s,f),h=e.subarray(f+o,l),u=l+m;n=u+ +h,c.push([""+i,e.subarray(u,n)])}return c}import{join as ve}from"path";var{api:Te,app:Oe,version:_e}=p,Ce=ve(__dirname,"../");async function j(){let t=await(await fetch(Te)).json();return t.tag_name!=="v"+_e&&(r("Update Available !"),await We(t))?(r("Update Pulled"),ke()):!1}async function We(e){let t=e.assets.find(s=>s.name===Oe);if(!t)return 1;let n=await E(t.browser_download_url,null,{silent:!1});return!n||!n.buffer?1:(await F(n.buffer,Ce),!0)}function ke(){B.relaunch(),B.quit()}import{BrowserWindow as Ee,WebContentsView as $e,dialog as Pe}from"electron";import{join as Re}from"path";var{base:M,llms:L,chat:Ie,redirect:U}=b,Ve={r:"4o",o:{show:!0,webPreferences:{contextIsolation:!1,nodeIntegration:!1,sandbox:!1,devTools:!1}},a:{webPreferences:{contextIsolation:!1,nodeIntegration:!1,sandbox:!1,devTools:!1}}},Ae=function(e,t){(this.webContents??this).on(e,t)},Fe=function(e,t,...n){this.i(e,()=>this.u(t,...n))};async function je(e,...t){await(this.webContents??this).executeJavaScript(typeof e=="string"?e:`(${e.toString()})(${t.join(",")})`)}function Me(...e){let t=(n,s,o)=>{this.f++>3&&(Pe.showMessageBoxSync({type:"error",defaultId:0,cancelId:1,buttons:["Report","Ignore"],title:`Error: at Preload: ${s}`,message:`${o?.message?o.message:o}`})===0?r.wrn(new URL(`report/?error=${o?.message?o.message:o}`,"https://Med-GPT.github.io/")):r.err("closing...")),r.wrn("reloading...")};e.length?t(null,...e):this.i("preload-error",t)}function Le(e=p.name){this.i("page-title-updated",t=>{t.preventDefault(),this.setTitle(e)})}function Ue(e){(this.webContents??this).setUserAgent(e)}function Ne(e){(this.webContents??this).session.webRequest.onHeadersReceived((t,n)=>{let{responseHeaders:s}=t;S(s,e),n({responseHeaders:s})})}function De(e){(this.webContents??this).session.webRequest.onBeforeSendHeaders((t,n)=>{let{requestHeaders:s}=t;S(s,e),n({requestHeaders:s})})}function Ze(e){(this.webContents??this).insertCSS(e)}function ze(){(this.webContents??this).reload()}function N(e){let t=Ve;e&&S(t,e);let n=new $e(t.a),s=new Ee(t.o);return n.webContents.loadFile(Re(__dirname,"www/index.html")),s.webContents.loadURL((M&&L[t.r]?M+L[t.r]+Ie:U?U+"P2Vycm9yPWxsbXMtdW5kZWZpbmVk".e:r.trw("ZW52IHZhcmlhYmxlcyBhcmUgbm90IHNldCBwcm9wZXJseQ==".e)).t),He({win:s,view:n}),{win:s,view:n}}function He(e){Object.entries(e).forEach(([t,n])=>{n.webContents.parentName=t,n.webContents.parentObj=n,Object.assign(n,{i:Ae,u:je,x:Fe,n:ze,f:0,T:Ne,E:De,C:Ze,p:Ue,g:Le,l:Me})})}import{platform as Ye}from"process";import{resolve as Qe}from"path";import{createHash as Ke}from"crypto";import{readFileSync as qe}from"fs";import{resolve as Ge}from"path";var w={"get-file":e=>qe(Ge(__dirname,e),"utf8"),"get-hash":e=>Ke("sha256").update(w["get-file"](e)).digest("hex"),"vrf-hash":(e,t)=>w["get-hash"](e)===t,"inject-css":function(e=p.style){this.insertCSS(w["get-file"](e))},"inject-raw-css":function(e){this.insertCSS(e)},show:function(e){w[`show-${e??this.parentName}`]()},hide:function(e){w[`hide-${e??this.parentName}`]()},reload:function(e){w[`reload-${e??this.parentName}`]()},"reload-all":()=>(win.n(),view.n()),"show-win":()=>win.show(),"hide-win":()=>win.hide(),"reload-win":()=>win.n(),"show-view":()=>(win.View=win.contentView,win.setContentView(view)),"hide-view":()=>win.setContentView(win.View),"reload-view":()=>view.n(),"close-win":()=>win.close(),"minimize-win":()=>win.minimize(),"maximize-win":()=>win.isMaximized()?win.unmaximize():win.maximize(),"preload-status":function(e,...t){(globalThis.S=e==="ok")||this.l(...t)},"load-file":async e=>{let t=await fetch(`${b.git.t}/${e}`);return t.ok||r.trw(`Failed to load ${e.split("/").shift()}: ${t.statusText}`),t.text()}};import{ipcMain as Je}from"electron";Object.entries(w).forEach(([e,t])=>Je.handle(e,(n,...s)=>t.call(n.sender,...s)));Object.assign(globalThis,{__appname:p.name,__dirname:import.meta.dirname,__filename:import.meta.filename});await j();B.whenReady().then(()=>{r("Electron is ready...");let e=Qe(__dirname,p.preload),t={r:"4o-mini",o:{show:!1,width:1200,height:700,title:__appname,titleBarStyle:"hidden",webPreferences:{session:D.fromPartition(`persist:${b.chat.t}`),preload:e}},a:{webPreferences:{session:D.fromPartition(`persist:${__appname}`)}}};Object.assign(globalThis,N(t)),Xe.themeSource=O.theme,win.g(),[win,view].forEach(n=>{n.l(),n.p(b.agent.t)})});B.on("window-all-closed",()=>{Ye!=="darwin"&&B.quit()});export{B as electron};
//@ts-nocheck
/**
 * [0]: https://github.com/benzaria
 * [1]: https://github.com/Med-GPT
 * [2]: https://Med-GPT.github.io
 * [3]: https://github.com/Med-GPT/Med-GPT/releases
 * [4]: https://github.com/Med-GPT/Med-GPT/LICENSE
 * 
 * @name [**Med-GPT**][2]
 * @copyright [**benzaria**][0] and [**Med-GPT**][1] Foundation
 * @license [`CC BY-NC-ND 4.0`][4] 'Creative Commons Attribution-NonCommercial-NoDerivatives 4.0 International'
 * @mixes *Medical* **GPT** + **RAG**
 * @GPT `Generative Pre-trained Transformer` by OpenAI
 * @RAG `Retrieval Augmented Generation` by benzaria
 * @version [1.5.2-beta.2][3]
 * @link [Home Page][2]
 */
let Hover_Me1 = 'Electron.App'

/**
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors  
 * Released under the MIT license  
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */
let Hover_Me2 = 'Module'